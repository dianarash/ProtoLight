# ProtoLight
Розробка мобільного додатку засобами Java для керування пристроєм світлових ефектів

## Опис проєкту ProtoLight
**ProtoLight** – це проєкт з керування світловими ефектами. По суті, це комплекс з двох об’єктів: додатка та мікроконтролерного пристрою з датчиками та LED-стрічкою. Датчики, розміщені безпосередньо на пристрої, використовуються для ввімкнення/вимкнення стрічки та зміни ефекту. За допомогою додатку користувач може здійснювати керування стрічкою шляхом відсилання команд певного стандарту на мікроконтролер.

### Принципова схема пристрою
![image](https://github.com/dianarash/ProtoLight/assets/95624375/a38bda9d-64f3-40fb-9d25-d00483366c10)
### Схема прототипу
![image](https://github.com/dianarash/ProtoLight/assets/95624375/09f20425-ec5c-4585-9941-49dfe3dfbe38)

Власне рішення тестувалося на базі модуля розробника ESP-32 DevKit V1 30-pin
Адресну світлодіодну стрічку можна підключати до будь-якого GPIO. Саморобні датчики дотику можна підключити до GPIO із групи TOUCH, модулі TTP223 до будь-якого GPIO. Живлення даних датчиків можна взяти із піну 2 – 3V3. Потрібно пам’ятати, що рівень сигналу датчика визначається напругою живлення, тому при живленні від 5В рівень сигналу HIGH також буде 5В. Це може призвести до виходу з ладу мікроконтролера розрахованого на сигнали рівнем до 3,6В. Також потрібно мати на увазі, що «…ADC2 pins can not be used when Wi-Fi is used…». Тому, якщо в процесі розробки виникне потреба підключити аналоговий датчик (наприклад мікрофон), то використовувати можна буде GPIO32…39.

### Модель взаємодії додатку та пристрою
![image](https://github.com/dianarash/ProtoLight/assets/95624375/b8a36b3c-6d15-4d3a-968f-cad59ebc5de7)

Мікроконтролерний пристрій виступає сервером (точкою доступу), а мікропроцесорний пристрій – клієнтом. 
Дані, які підлягають передачі, повинні мати структуру, що містить інформацію про тип команди (фіксованої довжини: 8 символів + «:») і значення параметру. 

### Модель взаємодії додатку та пристрою
| Параметр               | Команда     | Значення   |
| :--------------------- | :---------- | :--------- |
| On/Off                 | `cmd_onof:` | 0, 1       |
| Ефект                  | `cmd_efct:` | 0 … 63     |
| Яскравість             | `cmd_brgh:` | 5 … 255    |
| Швидкість              | `cmd_spd_:` | 0 … 100    |
| Колір                  | `cmd_clr_:` | 0хFFFFFFFF |
| Масштаб                | `cmd_prtn:` | 1 … 4      |
| Положення              | `cmd_pos_:` | 0 … 100    |
| SSID                   | `cmd_ssid`  | SSID       |
| Пароль                 | `cmd_pass:` | password   |
| Кількість світлодіодів | `cmd_ledc:` | кількість  |
| Збереження налаштувань | `cmd_save:` | -          |

Реалізація ефектів побудована на базі бібліотеки WS2812FX (https://github.com/kitesurfer1404/WS2812FX)
